# Evaluation Configuration File
# Defines metrics and parameters for pipeline evaluation

# Global evaluation settings
global:
  n_repeats: 3  # Number of times to repeat each experiment
  random_seed: 42
  save_intermediate: true

# Batch effect evaluation metrics
batch_effects:
  enabled: true

  # kBET score: measures local batch mixing
  kbet:
    enabled: true
    k: 25  # Number of neighbors
    n_jobs: 4

  # LISI score: Local Inverse Simpson Index
  lisi:
    enabled: true
    k: 25
    perplexity: 30

  # Batch mixing entropy
  mixing_entropy:
    enabled: true
    k_neighbors: 25

  # Variance ratio: within/between batch variance
  variance_ratio:
    enabled: true

# Performance evaluation metrics
performance:
  enabled: true

  # Runtime measurement
  runtime:
    enabled: true
    unit: "seconds"  # seconds or minutes

  # Memory usage
  memory:
    enabled: true
    interval: 0.1  # Sampling interval in seconds

  # Scalability analysis
  scalability:
    enabled: true
    sample_sizes: [100, 500, 1000, 5000, 10000]  # For scalability curves

# Data distribution metrics
distribution:
  enabled: true

  # Sparsity change
  sparsity:
    enabled: true

  # Statistical properties
  statistics:
    enabled: true
    metrics:
      - mean
      - std
      - skewness
      - kurtosis
      - cv  # Coefficient of variation

  # Distribution comparison
  distribution_test:
    enabled: true
    method: "ks"  # Kolmogorov-Smirnov test

# Data structure preservation metrics
structure:
  enabled: true

  # PCA variance explained
  pca_variance:
    enabled: true
    n_components: 10

  # Nearest neighbor consistency
  nn_consistency:
    enabled: true
    k: 10  # Number of neighbors

  # Distance preservation
  distance_preservation:
    enabled: true
    method: "spearman"  # spearman or pearson correlation

# Scoring and ranking
scoring:
  enabled: true

  # Weight for each dimension
  weights:
    batch_effects: 0.25
    performance: 0.25
    distribution: 0.25
    structure: 0.25

  # Grading system
  grading:
    A:
      min_score: 80
      description: "Excellent, no significant weaknesses"
    B:
      min_score: 60
      description: "Good, with specific strengths"
    C:
      min_score: 0
      description: "Acceptable, for special scenarios only"

# Visualization settings
visualization:
  enabled: true

  # Figure settings
  figure:
    dpi: 300
    format: "png"
    style: ["science", "no-latex"]
    figsize: [10, 8]

  # Color scheme for pipelines
  colors:
    pipeline_a: "#1f77b4"
    pipeline_b: "#ff7f0e"
    pipeline_c: "#2ca02c"
    pipeline_d: "#d62728"
    pipeline_e: "#9467bd"

  # Font settings
  font:
    family: "Arial"
    title_size: 16
    label_size: 12
    legend_size: 10

# Report generation
report:
  enabled: true

  # Report sections
  sections:
    - executive_summary
    - methodology
    - batch_effects
    - performance
    - distribution
    - structure
    - comprehensive_assessment
    - appendix

  # Output format
  format: "pdf"

  # Report metadata
  metadata:
    title: "Single-Cell Proteomics Analysis Pipeline Technical Comparison"
    authors: "ScpTensor Team"
    version: "1.0.0"
    date_format: "%Y-%m-%d"

# Data configuration
data:
  datasets:
    # Small single-batch dataset
    small:
      name: "Small Single-Batch Dataset"
      n_samples: 1000
      n_features: 1000
      n_batches: 1
      sparsity: 0.6

    # Medium multi-batch dataset
    medium:
      name: "Medium Multi-Batch Dataset"
      n_samples: 5000
      n_features: 1500
      n_batches: 5
      sparsity: 0.7

    # Large multi-batch dataset
    large:
      name: "Large Multi-Batch Dataset"
      n_samples: 20000
      n_features: 2000
      n_batches: 10
      sparsity: 0.75

  # Data loading options
  loading:
    cache: true
    cache_dir: "outputs/data_cache"
